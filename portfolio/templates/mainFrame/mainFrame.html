{% extends "defaultTemplate.html" %}

{% block title %}<title>KJ Chow home</title>{% endblock %}

{% block sidebar %}
    <div class="sideBar">
        <ul class="sideBar-ul">
            <a href="#experience"><li class="sideBar-li">Experience</span></li></a>
            <a href="#projects"><li class="sideBar-li">Projects</li></a>
            <a href="#cv"><li class="sideBar-li">CV</li></a>
            <a href="#contactFooter"><li class="sideBar-li" style="border-bottom: none !important;">Contact</li></a>
        </ul>
    </div>
{% endblock %}

{% block content %}
    <!-- One -->
    <section id="experience">
        <header class="major">
            <h2>Experience</h2>
        </header>
        <p>Accumsan orci faucibus id eu lorem semper. Eu ac iaculis ac nunc nisi lorem vulputate lorem neque cubilia ac in adipiscing in curae lobortis tortor primis integer massa adipiscing id nisi accumsan pellentesque commodo blandit enim arcu non at amet id arcu magna. Accumsan orci faucibus id eu lorem semper nunc nisi lorem vulputate lorem neque cubilia.</p>
        <ul class="actions">
            <li><a class="button">Learn More</a></li>
        </ul>
    </section>

    <!-- Two -->
    <section id="projects">
        <header class="major">
            <h2>Recent Work</h2>
        </header>
        <div class="row">
            <article class="col-6 col-12-xsmall work-item">
                <a href="{{ MEDIA_URl }}/projects/fulls/01.jpg" class="image fit thumb"><img src="{{ MEDIA_URl }}/projects/thumbs/01.jpg" alt="" /></a>
                <h3>Magna sed consequat tempus</h3>
                <p>Lorem ipsum dolor sit amet nisl sed nullam feugiat.</p>
            </article>
            <article class="col-6 col-12-xsmall work-item">
                <a href="{{ MEDIA_URl }}/projects/fulls/02.jpg" class="image fit thumb"><img src="{{ MEDIA_URl }}/projects/thumbs/02.jpg" alt="" /></a>
                <h3>Ultricies lacinia interdum</h3>
                <p>Lorem ipsum dolor sit amet nisl sed nullam feugiat.</p>
            </article>
            <article class="col-6 col-12-xsmall work-item">
                <a href="{{ MEDIA_URl }}/projects/fulls/03.jpg" class="image fit thumb"><img src="{{ MEDIA_URl }}/projects/thumbs/03.jpg" alt="" /></a>
                <h3>Tortor metus commodo</h3>
                <p>Lorem ipsum dolor sit amet nisl sed nullam feugiat.</p>
            </article>
            <article class="col-6 col-12-xsmall work-item">
                <a href="{{ MEDIA_URl }}/projects/fulls/04.jpg" class="image fit thumb"><img src="{{ MEDIA_URl }}/projects/thumbs/04.jpg" alt="" /></a>
                <h3>Quam neque phasellus</h3>
                <p>Lorem ipsum dolor sit amet nisl sed nullam feugiat.</p>
            </article>
            <article class="col-6 col-12-xsmall work-item">
                <a href="{{ MEDIA_URl }}/projects/fulls/05.jpg" class="image fit thumb"><img src="{{ MEDIA_URl }}/projects/thumbs/05.jpg" alt="" /></a>
                <h3>Nunc enim commodo aliquet</h3>
                <p>Lorem ipsum dolor sit amet nisl sed nullam feugiat.</p>
            </article>
            <article class="col-6 col-12-xsmall work-item">
                <a href="{{ MEDIA_URl }}/projects/fulls/06.jpg" class="image fit thumb"><img src="{{ MEDIA_URl }}/projects/thumbs/06.jpg" alt="" /></a>
                <h3>Risus ornare lacinia</h3>
                <p>Lorem ipsum dolor sit amet nisl sed nullam feugiat.</p>
            </article>
        </div>
        <ul class="actions">
            <li><a class="button">Full Portfolio</a></li>
        </ul>
    </section>

    <!-- Three -->
    <section id="cv">
        <header class="major">
            <h2>Curriculum Vitae</h2>
        </header>
        <p><a id="cvFullScreen">View Full Screen</a></p>
        <div id="cvDiv">
            <iframe
                id="cvKaiJie"
            ></iframe>
        </div>
    </section>
    
    <!-- base64 to Blob -->
    <script>
        const b64toBlob = (b64Data, contentType = '', sliceSize = 512) => {
            const byteCharacters = atob(b64Data);
            const byteArrays = [];

            for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {
                const slice = byteCharacters.slice(offset, offset + sliceSize),
                    byteNumbers = new Array(slice.length);
                for (let i = 0; i < slice.length; i++) {
                    byteNumbers[i] = slice.charCodeAt(i);
                }
                const byteArray = new Uint8Array(byteNumbers);

                byteArrays.push(byteArray);
            }

            const blob = new Blob(byteArrays, {
                type: contentType
            });
            return blob;
        };
        const contentType = "application/pdf";
        var b64Data = "{{cv_encode}}";
        var blob = b64toBlob(b64Data, contentType);
        var blobUrl = URL.createObjectURL(blob);

        const iframeEle = document.getElementById("cvKaiJie");
        iframeEle.src = blobUrl;

        const cvFullScreenEle = document.getElementById("cvFullScreen");
        cvFullScreenEle.href = blobUrl;
    </script>
{% endblock %}

{% block contactFooter %}
    {% include "contactFooter.html" %}
{% endblock %}